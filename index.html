<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Animal Control Chaos</title>
<style>
  body { margin:0; overflow:hidden; font-family:sans-serif; }
  canvas { display:block; }

  /* Start Screen */
  #startScreen {
    position:absolute;
    top:0; left:0;
    width:100%; height:100%;
    background:#222;
    color:white;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    z-index:10;
  }
  #startScreen button {
    margin-top:20px;
    padding:15px 30px;
    font-size:20px;
    cursor:pointer;
  }
</style>
</head>
<body>

<!-- Start Screen -->
<div id="startScreen">
  <h1>Animal Control Chaos</h1>
  <p>Click Start to enter the arena!</p>
  <button id="startBtn">Start Game</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/examples/js/controls/PointerLockControls.js"></script>
<script>
let scene, camera, renderer, controls;
let moveForward=false, moveBackward=false, moveLeft=false, moveRight=false;
let velocity = {x:0, z:0};
const speed = 0.1;

function initArena(){
    scene = new THREE.Scene();
    scene.background = new THREE.Color(0x87ceeb);

    camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);

    renderer = new THREE.WebGLRenderer({antialias:true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // PointerLockControls
    controls = new THREE.PointerLockControls(camera, document.body);
    scene.add(controls.getObject());

    // Floor
    const floor = new THREE.Mesh(
        new THREE.PlaneGeometry(50,50),
        new THREE.MeshBasicMaterial({color:0x228B22})
    );
    floor.rotation.x = -Math.PI/2;
    scene.add(floor);

    // Obstacles
    const obsMaterial = new THREE.MeshBasicMaterial({color:0x8B4513});
    for(let i=0;i<5;i++){
        const obs = new THREE.Mesh(new THREE.BoxGeometry(2,2,2), obsMaterial);
        obs.position.set(Math.random()*40-20,1,Math.random()*40-20);
        scene.add(obs);
    }

    // Position player at start
    controls.getObject().position.set(0,1.6,5);

    // Click to lock pointer
    document.body.addEventListener('click', ()=> controls.lock());

    // Keyboard input
    document.addEventListener('keydown', e => {
        if(e.code==='KeyW') moveForward=true;
        if(e.code==='KeyS') moveBackward=true;
        if(e.code==='KeyA') moveLeft=true;
        if(e.code==='KeyD') moveRight=true;
    });
    document.addEventListener('keyup', e => {
        if(e.code==='KeyW') moveForward=false;
        if(e.code==='KeyS') moveBackward=false;
        if(e.code==='KeyA') moveLeft=false;
        if(e.code==='KeyD') moveRight=false;
    });

    animate();
}

function animate(){
    requestAnimationFrame(animate);

    // Movement
    if(moveForward) controls.moveForward(speed);
    if(moveBackward) controls.moveForward(-speed);
    if(moveLeft) controls.moveRight(-speed);
    if(moveRight) controls.moveRight(speed);

    renderer.render(scene,camera);
}

// Resize
window.addEventListener('resize', ()=>{
    if(camera && renderer){
        camera.aspect = window.innerWidth/window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    }
});

// Start Button
document.getElementById('startBtn').addEventListener('click', ()=>{
    document.getElementById('startScreen').style.display='none';
    initArena();
});
</script>
</body>
</html>
